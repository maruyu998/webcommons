# タスク管理システム - user-requests.md運用ガイド

Claude Codeを使用したプロジェクトでの効率的なタスク管理とコミュニケーションのためのシステムです。

## システム概要

### 🎯 目標
- **書きやすさ**: 自由形式でタスクを記述
- **可視性**: 進捗・完了状況が明確
- **クリーン性**: メインファイルを見やすい状態で維持
- **継続性**: セッション間での状況保持
- **詳細記録**: 完了タスクの詳細を別途保存

## ファイル構成

```
docs/
├── user-requests.md              # メインタスク管理ファイル
├── sessions/                     # セッション記録（統合）
│   ├── completed/                # 完了したタスク・セッション
│   │   ├── YYYY-MM-DD-task-name-report.md
│   │   └── ...
│   └── active/                   # 進行中のセッション（通常は空）
└── notes/                        # 参考資料・分析結果
```

## セッション開始プロトコル

### 必須操作
新しいセッション開始時は**必ず最初に `docs/user-requests.md` を開いて**確認：

1. **新しい指示の有無** - 📝新しい指示セクション
2. **処理中タスクの継続** - 🔄処理中の指示セクション  
3. **完了タスクの状況** - ✅完了した指示セクション

### 実装方法
プロジェクトのCLAUDE.mdに以下を追加：

```markdown
#### セッション開始時の必須操作
新しいセッション開始時は**必ず最初に `docs/user-requests.md` を開いて**、以下を確認：
1. 新しい指示の有無
2. 処理中タスクの継続
3. 完了タスクの状況
```

## タスク管理フロー

### 1. 指示受付
**user-requests.md の「📝 新しい指示」セクション**
```markdown
## 📝 新しい指示 (自由に書いてください)

### 機能実装
push通知機能を追加したい。設定でオン/オフできるようにして。
```

### 2. タスク開始
**Claude Codeが実行:**
1. `docs/task-records/YYYY-MM-DD-task-name.md` 作成
2. user-requests.mdの「🔄 処理中の指示」に移動
3. 簡潔なステータス表示

```markdown
## 🔄 処理中の指示

### [進行中] push通知機能実装 → [詳細](./task-records/2025-06-28-push-notifications.md)
**ステータス:** 進行中 | **進捗:** 2/3タスク完了
```

### 3. タスク完了
**Claude Codeが実行:**
1. task-recordsファイルに詳細記録完成
2. user-requests.mdの「✅ 完了した指示」に移動
3. リンク付きサマリー表示

```markdown
## ✅ 完了した指示

### [2025-06-28] push通知機能実装 → [詳細](./task-records/2025-06-28-push-notifications.md)
**ステータス:** 完了 | **成果物:** 7つの通知タイミング実装、設定UI作成
```

### 4. ユーザー確認・クリーンアップ
**ユーザーが実行:**
1. task-recordsで詳細確認
2. 満足したらuser-requests.mdから該当項目削除
3. user-requests.mdをクリーン状態に維持

## user-requests.md テンプレート

```markdown
# User Requests (自由記述式指示システム)

## 指示の書き方
このファイルに自由形式で指示を書いてください。Claude Codeが自動的に：
1. 指示を理解・構造化
2. 作業を実行  
3. 完了状況をこのファイルに記録

---

## 📝 新しい指示 (自由に書いてください)

<!-- 今後の指示はここに自由形式で書いてください -->

---

## 🔄 処理中の指示

<!-- 現在処理中のタスクがここに表示されます -->

---

## ✅ 完了した指示

<!-- 完了タスクが詳細リンク付きで表示されます -->
<!-- ユーザーが確認後、項目を削除してクリーン状態維持 -->

---
```

## task-recordsファイル形式

### ファイル名規則
`YYYY-MM-DD-task-description.md`

例: `2025-06-28-push-notifications.md`

### 内容構成
```markdown
# [タスク名] - 完了レポート

**完了日**: YYYY-MM-DD
**優先度**: 高/中/低
**セッション**: 継続/新規

## 元の指示
[ユーザーの元の指示をそのまま記録]

## Claude Codeの解釈
[タスクの理解・構造化内容]

## 完了内容
[実装した内容の詳細]

## 成果物
[作成・変更したファイル一覧]

## 技術的詳細
[実装技術、設計判断等]

## 期待される効果
[実装による効果・メリット]
```

## Claude Code向け実装ガイド

### 必須実装事項

1. **セッション開始時の自動読込**
   - `docs/user-requests.md` を最初に開く
   - 新しい指示・処理中タスクの確認

2. **タスク開始時の処理**
   - task-recordsファイル作成
   - user-requests.md更新（新しい指示→処理中）

3. **タスク完了時の処理**  
   - task-recordsファイル完成
   - user-requests.md更新（処理中→完了）
   - リンク付きサマリー表示

4. **継続的な状況更新**
   - 進捗に応じたステータス更新
   - 詳細情報はtask-recordsに記録

### プロジェクト設定

各プロジェクトのCLAUDE.mdに以下を追加：

```markdown
### ユーザー指示管理システム

**メインファイル**: `docs/user-requests.md` 

#### セッション開始時の必須操作
新しいセッション開始時は**必ず最初に `docs/user-requests.md` を開いて**、以下を確認：
1. 新しい指示の有無
2. 処理中タスクの継続
3. 完了タスクの状況

#### タスク管理フロー
1. **タスク開始時**: `docs/task-records/YYYY-MM-DD-task-name.md` を作成し詳細記録
2. **user-requests.md更新**: 処理中セクションに簡潔なステータス表示
3. **タスク完了時**: 完了セクションにリンク付きサマリー追加
4. **ユーザー確認後**: ユーザーが完了項目を削除してクリーン状態維持
```

## 期待される効果

### 📈 開発効率向上
- タスクの見落とし防止
- 明確な進捗管理
- セッション間の継続性確保

### 📋 コミュニケーション改善
- 自由形式での指示記述
- 詳細な完了レポート
- クリーンなタスク一覧

### 🗂️ 知識管理
- 完了タスクの詳細記録保存
- 実装判断の記録
- プロジェクト履歴の蓄積

### 🔄 継続的改善
- システム運用の振り返り
- 他プロジェクトへの知見共有
- より効率的なワークフロー構築

このシステムにより、Claude Codeとの協働における指示・進捗・完了の管理が大幅に改善され、プロジェクト開発の効率と品質が向上します。