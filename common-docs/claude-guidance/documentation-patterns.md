# ドキュメント管理パターン

プロジェクト開発において効率的なドキュメント管理とClaude Codeとの協働を実現するためのパターンを説明します。

## ドキュメント構造（auth実装パターン）

### 基本的なディレクトリ構造

```
docs/
├── README.md                   # ドキュメント構造の説明
├── user-requests.md            # タスク管理メインファイル
├── sessions/                   # セッション記録（統合）
│   ├── completed/              # 完了したタスク・セッション
│   └── active/                 # 進行中のセッション（通常は空）
├── notes/                      # 参考資料・分析結果
├── decisions/                  # 重要な技術的決定事項
└── issues/                     # 発見された問題とその解決策
```

### ファイル命名規則

**セッション記録:**
- `sessions/active/YYYY-MM-DD-topic-description.md` (進行中)
- `sessions/completed/YYYY-MM-DD-topic-description.md` (完了)
- `sessions/completed/YYYY-MM-DD-task-name-report.md` (完了タスク詳細)

**技術的決定事項:**
- `decisions/YYYY-MM-DD-topic.md`
- 例: `decisions/2025-01-15-mongodb-type-safety.md`

**問題・課題:**
- `issues/YYYY-MM-DD-issue-description.md`
- `issues/topic-specific-problem.md`

**一般的なメモ:**
- `notes/YYYY-MM-DD-topic.md`
- `notes/general-topic.md`

## セッション管理ルール

### 1. セッション開始時

```markdown
# セッション開始時チェックリスト
- [ ] session-continuity.md の確認
- [ ] 前回セッションからの継続性確認
- [ ] 作業予定の確認
- [ ] 関連ドキュメントの読み込み
```

### 2. セッション中

**即座に記録すべき内容:**
- 重要な技術的決定とその理由
- 発見した問題と解決策
- アーキテクチャ変更
- 設定変更やコマンド

**記録方法:**
```markdown
## [時刻] 決定事項/問題/メモ

### 背景
- なぜこの決定/問題が発生したか

### 内容
- 具体的な内容

### 理由/解決策
- 判断理由や解決アプローチ

### 影響
- 他のコンポーネントへの影響
```

### 3. セッション終了時

```markdown
## セッション終了時タスク
- [ ] session_progress.md の更新
- [ ] 重要な決定事項をdecisions/に移動
- [ ] 次回セッションの準備事項記録
- [ ] 継続作業の明確化
```

## 技術的決定事項の記録パターン

### 決定事項記録テンプレート

```markdown
# [決定事項タイトル]

**日付**: YYYY-MM-DD  
**決定者**: [名前または役割]  
**影響範囲**: [影響を受けるコンポーネント]

## 背景

[なぜこの決定が必要になったか]

## 検討した選択肢

1. **選択肢A**
   - メリット: [利点]
   - デメリット: [欠点]

2. **選択肢B**
   - メリット: [利点]  
   - デメリット: [欠点]

## 決定内容

[採用した選択肢と具体的な実装方法]

## 理由

[なぜその選択肢を選んだか]

## 実装ガイドライン

[実装時の注意点や手順]

## 関連ドキュメント

- [関連するファイルやドキュメント]
```

## 問題・課題の記録パターン

### 問題記録テンプレート

```markdown
# [問題タイトル]

**発見日**: YYYY-MM-DD  
**重要度**: [高/中/低]  
**状況**: [発見/調査中/解決済み]

## 問題の概要

[何が起きているか]

## 再現手順

1. [手順1]
2. [手順2]
3. [結果]

## 期待される動作

[本来どうあるべきか]

## 調査内容

[試したこと、調べたこと]

## 解決策

[解決方法（分かった場合）]

## 予防策

[今後同様の問題を防ぐ方法]

## 関連情報

- エラーメッセージ
- ログ情報
- 関連するコード
```

## Claude Code協働のためのドキュメント活用

### 1. セッション継続のための情報整理

**セッション開始時に確認すべきドキュメント:**
```
1. session_progress.md - プロジェクト全体進捗
2. 最新のsessions/ ファイル - 前回の作業内容
3. 関連するdecisions/ ファイル - 技術的決定事項
4. 関連するissues/ ファイル - 既知の問題
```

### 2. 効率的な情報伝達

**Claude Codeへの効果的な指示:**
- 具体的なファイル名とパスを記載
- 変更理由と背景を明確に記録
- 期待する結果を明示
- 制約や注意点を明記

### 3. 知識の蓄積と共有

**プロジェクト横断で有用な情報:**
- アーキテクチャパターンの決定理由
- ライブラリ選定の基準
- パフォーマンス最適化の手法
- セキュリティ対策の実装方法

## 注意事項

### 1. ドキュメントの品質維持

- **簡潔で明確**: 要点を絞って記述
- **日付の記載**: いつの情報かを明確に
- **更新の習慣**: 古い情報は適切に更新

### 2. セキュリティ配慮

- **機密情報の除外**: パスワードやAPIキーを記載しない
- **適切な権限設定**: 必要に応じてアクセス制限

### 3. 継続性の確保

- **命名規則の遵守**: 一貫したファイル命名
- **テンプレート活用**: 標準的な構造を維持
- **定期的な整理**: 不要な情報の削除

## 統一ドキュメント記録システム

**重要**: 2025年6月以降、sessions/ディレクトリに統合した新しいシステムを採用しています。

詳細は **[unified-session-documentation.md](./unified-session-documentation.md)** を参照してください。

### 統合システムの概要
- **sessions/**: すべてのセッション記録を統合（リアルタイム・完了レポート両方）
- **リアルタイム記録**: 簡潔・即座記録
- **完了レポート**: 詳細・構造化記録（-report接尾辞）
- **統一原則**: 単一ディレクトリでの段階的ドキュメント作成

このパターンに従うことで、複数セッションにわたる開発プロジェクトでも一貫した情報管理とClaude Codeとの効率的な協働が実現できます。